<Window x:Class="ClipDiscordApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="OCR Overlay Viewer"
        Height="720" Width="900"
        WindowStartupLocation="CenterScreen"
        Loaded="Window_Loaded">
    <Grid>
        <!-- 上部バー: 2行に分割 -->
        <Border Background="#FFF" BorderBrush="#DDD" BorderThickness="0,0,0,1" Height="92" VerticalAlignment="Top">
            <Grid Margin="8,6">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- 1行目: ボタン群 -->
                <ScrollViewer Grid.Row="0" Grid.Column="0" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Disabled">
                    <WrapPanel x:Name="LeftControlsRow1" VerticalAlignment="Center" ItemHeight="34" Orientation="Horizontal">
                        <Button x:Name="BtnStartMonitoring" Content="Start" Width="100" Height="30" Margin="0,0,8,0" Click="BtnStartMonitoring_Click"/>
                        <Button x:Name="BtnStopMonitoring" Content="Stop" Width="72" Height="30" Margin="0,0,8,0" Click="BtnStopMonitoring_Click" IsEnabled="False"/>
                        <Button x:Name="BtnOpenRules" Content="Rules" Width="72" Height="30" Margin="0,0,8,0" Click="BtnOpenRules_Click"/>
                        <Button x:Name="BtnTestNotification" Content="通知テスト" Width="100" Height="30" Margin="0,0,8,0" Click="BtnTestNotification_Click"/>
                        <Button x:Name="BtnSelectRegion" Content="領域選択" Width="92" Height="30" Margin="0,0,8,0" Click="BtnSelectRegion_Click"/>
                    </WrapPanel>
                </ScrollViewer>

                <!-- 右側ステータス（1行目） -->
                <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right">
                    <TextBlock x:Name="StatusText" VerticalAlignment="Center" Margin="0,0,8,0" Text="Ready" FontWeight="SemiBold"/>
                </StackPanel>

                <!-- 2行目: テキストラベルとコンパクトなテキストボックス -->
                <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,6,0,0">
                    <TextBlock Text="テスト通知メッセージ" FontSize="12" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <!-- 一行表示向けに高さを小さくする（通常の半分程度） -->
                    <TextBox x:Name="txtNotificationContent" Height="18" MinWidth="260" Width="420" Text="BUY"
                             VerticalContentAlignment="Center" ToolTip="ここに送信するメッセージを入力してください"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- メイン領域（上部バーの下に配置） -->
        <Grid Margin="0,92,0,0">
            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                <Grid>
                    <Image x:Name="CapturedImage"
                           Stretch="None"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           MouseLeftButtonDown="CapturedImage_MouseLeftButtonDown"
                           MouseMove="CapturedImage_MouseMove"
                           MouseLeftButtonUp="CapturedImage_MouseLeftButtonUp"/>
                    <Canvas x:Name="OverlayCanvas" IsHitTestVisible="False" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                </Grid>
            </ScrollViewer>

            <Border HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="8" Padding="6" Background="#80000000" CornerRadius="4">
                <TextBlock Foreground="White" FontSize="12" Text="Press Start then select region to begin monitoring."/>
            </Border>
        </Grid>
    </Grid>
</Window>